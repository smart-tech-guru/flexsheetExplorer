/*
    *
    * Wijmo Library 5.20172.334
    * http://wijmo.com/
    *
    * Copyright(c) GrapeCity, Inc.  All rights reserved.
    *
    * Licensed under the Wijmo Commercial License.
    * sales@wijmo.com
    * wijmo.com/products/wijmo-5/license/
    *
    */
var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();define(["require","exports","wijmo/wijmo","wijmo/wijmo.chart","wijmo/wijmo.chart.finance","wijmo/wijmo.chart.finance.analytics"],function(n,t,i,r,u,f){"use strict";function e(n){return isFinite(n)&&!isNaN(n)&&i.isNumber(n)}function b(n,t,r,f,e){var v;i.asArray(n,!1);i.asArray(t,!1);i.asArray(r,!1);i.asInt(f,!1,!0);i.asNumber(e,!1,!0);var c=u._minimum(n.length,t.length,r.length),s=[],l=[],h,o,a=[];for(i.assert(c>f&&f>1,"CCI period must be an integer less than the length of the data and greater than one."),o=0;o<c;o++)s.push(u._average(n[o],t[o],r[o]));for(h=u._sma(s,f),o=0;o<h.length;o++)v=s.slice(o,f+o).reduce(function(n,t){return n+Math.abs(h[o]-t)},0),l.push(v/f);for(s.splice(0,f-1),o=0;o<h.length;o++)a.push((s[o]-h[o])/(e*l[o]));return a}function d(n,t,r,f){i.asArray(n,!1);i.asArray(t,!1);i.asArray(r,!1);i.asInt(f,!1,!0);var c=u._minimum(n.length,t.length,r.length),o=[],s=[],h=[],e;for(i.assert(c>f&&f>1,"Williams %R period must be an integer less than the length of the data and greater than one."),e=f;e<=n.length;e++)o.push(u._maximum(n.slice(e-f,e))),s.push(u._minimum(t.slice(e-f,e)));for(r.splice(0,f-1),e=0;e<o.length;e++)h.push((o[e]-r[e])/(o[e]-s[e])*-100);return h}function tt(n,t,r){var e,o,f;for(i.asArray(n,!1),i.asInt(t,!1,!0),i.asNumber(r,!1,!0),i.assert(n.length>t&&t>1,"Bollinger Bands period must be an integer less than the length of the data and greater than one."),e=u._sma(n,t),o=[],f=t;f<=n.length;f++)o.push(u._stdDeviation(n.slice(f-t,f)));var s=e,h=e.map(function(n,t){return n+o[t]*r}),c=e.map(function(n,t){return n-o[t]*r});return{lowers:c,middles:s,uppers:h}}function rt(n,t){i.asArray(n,!1);i.asInt(t,!0,!1);i.assert(n.length>t&&t>1,"RSI period must be an integer less than the length of the data and greater than one.");for(var e=[],o=[],s=[],h,c,l=[],f,r=1;r<n.length;r++)e.push(n[r]-n[r-1]);for(h=e.map(function(n){return n>0?n:0}),c=e.map(function(n){return n<0?Math.abs(n):0}),r=t;r<=e.length;r++)r===t?(o.push(u._sum(h.slice(r-t,r))/t),s.push(u._sum(c.slice(r-t,r))/t)):(o.push((h[r-1]+o[r-t-1]*(t-1))/t),s.push((c[r-1]+s[r-t-1]*(t-1))/t)),f=o[r-t]/s[r-t],f=isFinite(f)?f:0,l.push(100-100/(1+f));return l}function et(n,t,r,f){var c,s,a;i.asArray(n,!1);i.asInt(t,!1,!0);i.asInt(r,!1,!0);i.asInt(f,!1,!0);c=t>r;c&&(s=r,r=t,t=s);var l=u._ema(n,t),y=u._ema(n,r),o=[],v=[],h,e;for(l.splice(0,r-t),e=0;e<l.length;e++)s=l[e]-y[e],c&&(s*=-1),o.push(s);for(h=u._ema(o,f),a=o.slice(o.length-h.length,o.length),e=0;e<a.length;e++)v.push(a[e]-h[e]);return{macds:o,signals:h,histograms:v}}function st(n,t,r,f,e,o){i.asArray(n,!1);i.asArray(t,!1);i.asArray(r,!1);i.asInt(f,!1,!0);i.asInt(e,!1,!0);i.asInt(o,!0,!0);for(var l=[],c=[],h=[],a,s=f;s<=n.length;s++)l.push(u._maximum(n.slice(s-f,s))),c.push(u._minimum(t.slice(s-f,s)));for(r=r.slice(f-1),s=0;s<r.length;s++)h.push((r[s]-c[s])/(l[s]-c[s])*100);return o&&o>1&&(h=u._sma(h,o)),a=u._sma(h,e),{ks:h,ds:a}}var l,a,v,y,o,s,p,w,k,h,g,nt,it,c,ut,ft,ot;Object.defineProperty(t,"__esModule",{value:!0});window.wijmo=window.wijmo||{};window.wijmo.chart=window.wijmo.chart||{};window.wijmo.chart.finance=window.wijmo.chart.finance||{};window.wijmo.chart.finance.analytics=f;l=function(n){function t(t){var i=n.call(this)||this;return i._levels=[0,23.6,38.2,50,61.8,100],i._uptrend=!0,i._labelPosition=r.LabelPosition.Left,i.rendering.addHandler(i._render),i.initialize(t),i}return __extends(t,n),Object.defineProperty(t.prototype,"low",{get:function(){return this._low},set:function(n){n!=this._low&&(this._low=i.asNumber(n,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"high",{get:function(){return this._high},set:function(n){n!=this._high&&(this._high=i.asNumber(n,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"labelPosition",{get:function(){return this._labelPosition},set:function(n){n!=this._labelPosition&&(this._labelPosition=i.asEnum(n,r.LabelPosition,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"uptrend",{get:function(){return this._uptrend},set:function(n){n!=this._uptrend&&(this._uptrend=i.asBoolean(n,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"levels",{get:function(){return this._levels},set:function(n){n!=this._levels&&(this._levels=i.asArray(n,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minX",{get:function(){return this._minX},set:function(n){n!=this._minX&&(this._minX=n,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxX",{get:function(){return this._maxX},set:function(n){n!=this._maxX&&(this._maxX=n,this._invalidate())},enumerable:!0,configurable:!0}),t.prototype._getMinX=function(){return i.isNumber(this._minX)?this._minX:i.isDate(this._minX)?i.asDate(this._minX).valueOf():this._getAxisX().actualMin},t.prototype._getMaxX=function(){return i.isNumber(this._maxX)?this._maxX:i.isDate(this._maxX)?i.asDate(this._maxX).valueOf():this._getAxisX().actualMax},t.prototype._updateLevels=function(){var r=undefined,u=undefined,f,e,t,i,o;if((this._low===undefined||this._high===undefined)&&(f=n.prototype.getValues.call(this,0),e=n.prototype.getValues.call(this,1),f)){var s=f.length,h=this._getMinX(),c=this._getMaxX();for(t=0;t<s;t++)(i=f[t],o=e?e[t]:t,o<h||o>c)||isNaN(i)||((r===undefined||r>i)&&(r=i),(u===undefined||u<i)&&(u=i))}this._actualLow=this._low===undefined&&r!==undefined?r:this._low;this._actualHigh=this._high===undefined&&u!==undefined?u:this._high},t.prototype._render=function(n,t){var u,c,l,w,o,y,h;t.cancel=!0;u=n;u._updateLevels();var e=u._getAxisX(),k=u._getAxisY(),f=t.engine,d=u._getSymbolStroke(u._chart.series.indexOf(u)),g=r._BasePlotter.cloneStyle(u.style,['fill']),p=r._BasePlotter.cloneStyle(u.style,['stroke']),nt=u.chart._plotrectId;for(f.stroke=d,f.strokeWidth=2,f.textFill=d,c=u._getMinX(),l=u._getMaxX(),c<e.actualMin&&(c=e.actualMin),l>e.actualMax&&(l=e.actualMax),f.startGroup(null,nt),w=u._levels?u._levels.length:0,o=0;o<w;o++){var b=u._levels[o],a=e.convert(c),v=e.convert(l),s=u.uptrend?k.convert(u._actualLow+.01*b*(u._actualHigh-u._actualLow)):k.convert(u._actualHigh-.01*b*(u._actualHigh-u._actualLow));if(r._DataInfo.isValid(a)&&r._DataInfo.isValid(v)&&r._DataInfo.isValid(s)&&(f.drawLine(a,s,v,s,null,g),u.labelPosition!=r.LabelPosition.None)){y=b.toFixed(1)+'%';h=0;(u.uptrend&&o==0||!u.uptrend&&o==w-1)&&(h=2);switch(u.labelPosition){case r.LabelPosition.Left:r.FlexChartCore._renderText(f,y,new i.Point(a,s),0,h,null,null,p);break;case r.LabelPosition.Center:r.FlexChartCore._renderText(f,y,new i.Point(.5*(a+v),s),1,h,null,null,p);break;case r.LabelPosition.Right:r.FlexChartCore._renderText(f,y,new i.Point(v,s),2,h,null,null,p)}}}f.stroke=null;f.strokeWidth=null;f.textFill=null;f.endGroup()},t.prototype._getChartType=function(){return r.ChartType.Line},t}(r.SeriesBase);t.Fibonacci=l;a=function(n){function t(t){var i=n.call(this)||this;return i._levels=[38.2,50,61.8],i._labelPosition=r.LabelPosition.Top,i.rendering.addHandler(i._render,i),i.initialize(t),i}return __extends(t,n),Object.defineProperty(t.prototype,"start",{get:function(){return this._start},set:function(n){n!==this.start&&(this._start=i.asType(n,r.DataPoint),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"end",{get:function(){return this._end},set:function(n){n!==this.end&&(this._end=i.asType(n,r.DataPoint),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"levels",{get:function(){return this._levels},set:function(n){n!==this._levels&&(this._levels=i.asArray(n,!1),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"labelPosition",{get:function(){return this._labelPosition},set:function(n){n!==this.labelPosition&&(this._labelPosition=i.asEnum(n,r.LabelPosition),this._invalidate())},enumerable:!0,configurable:!0}),t.prototype._render=function(t,u){var et,v,nt,k,y,ot,s,p,d,w,tt,g;u.cancel=!0;var b=this._getX(0),h=this._getY(0),c=this._getX(1),o=this._getY(1);if(!(n.prototype._getLength.call(this)<=1)&&e(b)&&e(h)&&e(c)&&e(o)){var l=this._getAxisX(),a=this._getAxisY(),f=u.engine,it,st=this.chart.series.indexOf(this),rt=this._getSymbolStroke(st),ut=r._BasePlotter.cloneStyle(this.style,["fill"]),ft=r._BasePlotter.cloneStyle(this.style,["stroke"]);for(f.stroke=rt,f.strokeWidth=2,f.textFill=rt,et=this.chart._plotrectId,v=o-h,it=f.startGroup(null,et),i.addClass(it,'fibonacci-arcs'),e(b)&&e(h)&&e(c)&&e(o)&&f.drawLines([l.convert(b),l.convert(c)],[a.convert(h),a.convert(o)],null,ut),ot=Math.sqrt(Math.pow(l.convert(c)-l.convert(b),2)+Math.pow(a.convert(o)-a.convert(h),2)),p=new i.Point(c,o),g=0;g<this.levels.length;g++)if(d=this.levels[g]*.01,s=Math.abs(ot*d),e(p.x)&&e(p.y)&&e(s)&&(nt=l.convert(p.x),k=a.convert(p.y),f.drawDonutSegment(nt,k,s,s,v>0?0:Math.PI,Math.PI,null,ut),this.labelPosition!==r.LabelPosition.None&&d!==0)){tt=i.Globalize.format(d,"p1");w=f.measureString(tt,null,null,ft);y=v<=0?k-s:k+s;switch(this.labelPosition){case r.LabelPosition.Center:y+=w.height*.5;break;case r.LabelPosition.Bottom:y+=v<=0?w.height:0;break;default:y+=v<=0?0:w.height}f.drawString(tt,new i.Point(nt-w.width*.5,y),null,ft)}f.stroke=null;f.strokeWidth=null;f.textFill=null;f.endGroup()}},t.prototype._getX=function(n){var t=null;return n===0&&this.start?t=this.start.x:n===1&&this.end&&(t=this.end.x),i.isDate(t)&&(t=i.asDate(t).valueOf()),t},t.prototype._getY=function(n){var t=null;return n===0&&this.start?t=this.start.y:n===1&&this.end&&(t=this.end.y),t},t.prototype._getChartType=function(){return r.ChartType.Line},t}(r.SeriesBase);t.FibonacciArcs=a;v=function(n){function t(t){var i=n.call(this)||this;return i._levels=[0,23.6,38.2,50,61.8,100],i._labelPosition=r.LabelPosition.Top,i.rendering.addHandler(i._render,i),i.initialize(t),i}return __extends(t,n),Object.defineProperty(t.prototype,"start",{get:function(){return this._start},set:function(n){n!==this.start&&(this._start=i.asType(n,r.DataPoint),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"end",{get:function(){return this._end},set:function(n){n!==this.end&&(this._end=i.asType(n,r.DataPoint),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"levels",{get:function(){return this._levels},set:function(n){n!==this._levels&&(this._levels=i.asArray(n,!1),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"labelPosition",{get:function(){return this._labelPosition},set:function(n){n!==this.labelPosition&&(this._labelPosition=i.asEnum(n,r.LabelPosition),this._invalidate())},enumerable:!0,configurable:!0}),t.prototype._updateLevels=function(){if(!this.start||!this.end){var l=this.chart._getPlotter(this),c=this._getAxisX(),t=n.prototype.getValues.call(this,0),i=n.prototype.getValues.call(this,1)||l.dataInfo.getXVals(),f,o,s,h;t&&t.length>0&&(s=u._minimum(t),h=u._maximum(t));i&&i.length>0?(f=u._minimum(i),o=u._maximum(i)):(f=c.actualMin,o=c.actualMax);e(f)&&e(s)&&e(o)&&e(h)&&(this.start=new r.DataPoint(f,s),this.end=new r.DataPoint(o,h))}},t.prototype._render=function(t,u){var dt,st;u.cancel=!0;this._updateLevels();var at=this._getX(0),vt=this._getY(0),yt=this._getX(1),pt=this._getY(1);if(!(n.prototype._getLength.call(this)<=1)&&e(at)&&e(vt)&&e(yt)&&e(pt)){var c=this._getAxisX(),h=this._getAxisY(),ti=this.chart.series.indexOf(this),b=u.engine,gt=this._getSymbolStroke(ti),ii=r._BasePlotter.cloneStyle(this.style,["fill"]),wt=r._BasePlotter.cloneStyle(this.style,["stroke"]);b.stroke=gt;b.strokeWidth=2;b.textFill=gt;var nt=pt-vt,ut=yt-at,ri=this.chart._plotrectId,ft,d,tt,w,it,v,bt,p,k,kt,et,f,ot;for(ft=at,tt=vt,d=yt,w=pt,dt=d,b.startGroup(null,ri),st=0;st<this.levels.length;st++)if(d=ut<0?c.actualMin:c.actualMax,kt=this.levels[st]*.01,w=tt+kt*nt,p=(w-tt)/(dt-ft),k=w-p*dt,w=p*d+k,nt>0&&w>h.actualMax?(w=h.actualMax,d=(w-k)/p):nt<0&&w<h.actualMin&&(w=h.actualMin,d=(w-k)/p),e(ft)&&e(tt)&&e(d)&&e(w)&&(it=new i.Point(c.convert(ft),h.convert(tt)),v=new i.Point(c.convert(d),h.convert(w)),b.drawLines([it.x,v.x],[it.y,v.y],null,ii),this.labelPosition!=r.LabelPosition.None)){et=i.Globalize.format(kt,"p1");f=b.measureString(et,null,null,wt);ot=Math.atan((v.y-it.y)/(v.x-it.x))*180/Math.PI;bt=v.clone();v.x=ut>0?v.x-f.width:v.x;var o=ot*Math.PI/180,s=new i.Point,a=new i.Point,y=new i.Point,l=new i.Point,ht=h.convert(h.actualMin),ni=h.convert(h.actualMax),ct=c.convert(c.actualMin),lt=c.convert(c.actualMax),g,rt=bt.clone();switch(this.labelPosition){case r.LabelPosition.Center:v.y+=f.height*.5;rt.y+=f.height*.5;break;case r.LabelPosition.Bottom:v.y+=f.height}ut>0?(this.labelPosition===r.LabelPosition.Top||this.labelPosition===r.LabelPosition.Center?(l=rt.clone(),y.x=l.x+f.height*Math.sin(o),y.y=l.y-f.height*Math.cos(o),s.x=l.x-f.width*Math.cos(o)+f.height*Math.sin(o),s.y=l.y-f.width*Math.sin(o)-f.height*Math.cos(o),a.x=l.x-f.width*Math.cos(o),a.y=l.y-f.width*Math.sin(o)):this.labelPosition===r.LabelPosition.Bottom&&(y=rt.clone(),s.x=y.x-f.width*Math.cos(o),s.y=y.y-f.width*Math.sin(o),a.x=s.x-f.height*Math.sin(o),a.y=s.y+f.height*Math.cos(o),l.x=s.x+f.width*Math.cos(o)-f.height*Math.sin(o),l.y=s.y+f.width*Math.sin(o)+f.height*Math.cos(o)),nt>0?(y.y<ni&&(p=(h.convertBack(y.y)-h.convertBack(s.y))/(c.convertBack(y.x)-c.convertBack(s.x)),k=h.convertBack(y.y)-p*c.convertBack(y.x),g=c.convert((h.actualMax-k)/p),v.x-=Math.abs(y.x-g)),l.x>lt&&(v.x-=Math.abs(lt-l.x))):nt<0&&(l.y>ht&&(p=(h.convertBack(a.y)-h.convertBack(l.y))/(c.convertBack(a.x)-c.convertBack(l.x)),k=h.convertBack(l.y)-p*c.convertBack(l.x),g=c.convert((h.actualMin-k)/p),v.x-=Math.max(Math.abs(g-l.x),Math.abs(ht-l.y))),y.x>lt&&(v.x-=Math.abs(lt-y.x)))):ut<0&&(this.labelPosition===r.LabelPosition.Top||this.labelPosition===r.LabelPosition.Center?(a=rt.clone(),s.x=a.x+f.height*Math.sin(o),s.y=a.y-f.height*Math.cos(o),l.x=a.x+f.width*Math.cos(o),l.y=a.y+f.width*Math.sin(o),y.x=s.x+f.width*Math.cos(o),y.y=s.y+f.width*Math.sin(o)):this.labelPosition===r.LabelPosition.Bottom&&(s=rt.clone(),y.x=s.x+f.width*Math.cos(o),y.y=s.y+f.width*Math.sin(o),a.x=s.x-f.height*Math.sin(o),a.y=s.y+f.height*Math.cos(o),l.x=s.x+f.width*Math.cos(o)-f.height*Math.sin(o),l.y=s.y+f.width*Math.sin(o)+f.height*Math.cos(o)),nt>0?(s.y<ni&&(p=(h.convertBack(s.y)-h.convertBack(y.y))/(c.convertBack(s.x)-c.convertBack(y.x)),k=h.convertBack(s.y)-p*c.convertBack(s.x),g=c.convert((h.actualMax-k)/p),v.x+=Math.abs(s.x-g)),a.x<ct&&(v.x+=Math.abs(ct-a.x))):nt<0&&(a.y>ht&&(p=(h.convertBack(l.y)-h.convertBack(a.y))/(c.convertBack(l.x)-c.convertBack(a.x)),k=h.convertBack(a.y)-p*c.convertBack(a.x),g=c.convert((h.actualMin-k)/p),v.x+=Math.max(Math.abs(g-a.x),Math.abs(ht-a.y))),s.x<ct&&(v.x+=Math.abs(ct-s.x))));ot===0?b.drawString(et,v,null,wt):b.drawStringRotated(et,v,bt,ot,null,wt)}b.stroke=null;b.strokeWidth=null;b.textFill=null;b.endGroup()}},t.prototype._getX=function(n){var t=null;return n===0&&this.start?t=this.start.x:n===1&&this.end&&(t=this.end.x),i.isDate(t)&&(t=i.asDate(t).valueOf()),t},t.prototype._getY=function(n){var t=null;return n===0&&this.start?t=this.start.y:n===1&&this.end&&(t=this.end.y),t},t.prototype._getChartType=function(){return r.ChartType.Line},t}(r.SeriesBase);t.FibonacciFans=v;y=function(n){function t(t){var i=n.call(this)||this;return i._levels=[0,1,2,3,5,8,13,21,34],i._labelPosition=r.LabelPosition.Right,i.rendering.addHandler(i._render,i),i.initialize(t),i}return __extends(t,n),Object.defineProperty(t.prototype,"startX",{get:function(){return this._startX},set:function(n){n!==this.startX&&(this._startX=i.isDate(n)?i.asDate(n):i.asNumber(n),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endX",{get:function(){return this._endX},set:function(n){n!==this.endX&&(this._endX=i.isDate(n)?i.asDate(n):i.asNumber(n),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"levels",{get:function(){return this._levels},set:function(n){n!==this._levels&&(this._levels=i.asArray(n,!1),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"labelPosition",{get:function(){return this._labelPosition},set:function(n){n!==this.labelPosition&&(this._labelPosition=i.asEnum(n,r.LabelPosition),this._invalidate())},enumerable:!0,configurable:!0}),t.prototype._render=function(t,u){var h,v,a;if(u.cancel=!0,this._updateLevels(),h=this._getX(0),v=this._getX(1),!(n.prototype._getLength.call(this)<=1)&&e(h)&&e(v)){var y=v-h,p=this._getAxisX(),c=this._getAxisY(),nt=this._chart.series.indexOf(this),o=u.engine,s=2,k=this._getSymbolStroke(nt),tt=r._BasePlotter.cloneStyle(this.style,["fill"]),d=r._BasePlotter.cloneStyle(this.style,["stroke"]),g=c.convert(c.actualMin),it=c.convert(c.actualMax),w,f,l,b,rt=this.chart._plotrectId;if(o.stroke=k,o.strokeWidth=s,o.textFill=k,y!==0){for(o.startGroup(null,rt),a=0;a<this.levels.length;a++)if((w=this.levels[a],f=y*w+h,!(f<p.actualMin)&&!(p.actualMax<f)&&e(f))&&(f=p.convert(f),o.drawLine(f,g,f,it,null,tt),this.labelPosition!==r.LabelPosition.None)){b=i.Globalize.format(w,"n0");l=o.measureString(b,null,null,d);switch(this.labelPosition){case r.LabelPosition.Left:f-=l.width+s;break;case r.LabelPosition.Center:f-=l.width/2;break;case r.LabelPosition.Right:f+=s;break;default:f=y<0?f-l.width-s:f+s}o.drawString(b,new i.Point(f,g),null,d)}o.stroke=null;o.strokeWidth=null;o.textFill=null;o.endGroup()}}},t.prototype._updateLevels=function(){var u=this.chart._getPlotter(this),t=n.prototype.getValues.call(this,1)||u.dataInfo.getXVals();if(!(n.prototype._getLength.call(this)<=1)){var f=this._getX(0),e=this._getX(1),r=i.isNumber(f)&&i.isNumber(e);r||t?!r&&t&&(this._startX=t[0],this._endX=t[1]):(this._startX=0,this._endX=1)}},t.prototype._getX=function(n){var t=null;return n===0?t=this.startX:n===1&&(t=this.endX),i.isDate(t)&&(t=i.asDate(t).valueOf()),t},t.prototype._getChartType=function(){return r.ChartType.Line},t}(r.SeriesBase);t.FibonacciTimeZones=y;o=function(n){function t(t){var i=n.call(this,t)||this;return i._seriesCount=1,i}return __extends(t,n),Object.defineProperty(t.prototype,"_hitTester",{get:function(){return this._plotter&&!this.__hitTester&&(this.__hitTester=this._plotter.hitTester),this.__hitTester},enumerable:!0,configurable:!0}),t.prototype._getChartType=function(){return r.ChartType.Line},t.prototype._getXValues=function(){return n.prototype.getValues.call(this,1)||this._plotter.dataInfo.getXVals()},t.prototype._getDataPoint=function(n,t,i,u,f,e){var o=new r._DataPoint(i,u,n,t);return o.y=t,o.yfmt=e._formatValue(t),o.x=n,o.xfmt=f._formatValue(n),o},t.prototype._shouldCalculate=function(){return!0},t.prototype._init=function(){},t.prototype._calculate=function(){},t.prototype._clearValues=function(){n.prototype._clearValues.call(this);this.__hitTester=null},t.prototype._getName=function(n){var i=undefined,t;return this.name&&(this.name.indexOf(",")?(t=this.name.split(","),t&&t.length-1>=n&&(i=t[n].trim())):i=this.name),i},t.prototype._getStyles=function(n){var t=null,i,r;if(n<0||this._styles===null)return t;i=0;for(r in this._styles){if(i===n&&this._styles.hasOwnProperty(r)){t=this._styles[r];break}i++}return t},t.prototype.legendItemLength=function(){return this._seriesCount},t.prototype.measureLegendItem=function(n,t){var u=this._getName(t),r=new i.Size(0,0);return u&&(r=this._measureLegendItem(n,this._getName(t))),r},t.prototype.drawLegendItem=function(n,t,i){var r=this._getStyles(i)||this.style,u=this._getName(i);u&&this._drawLegendItem(n,t,this._getChartType(),this._getName(i),r,this.symbolStyle)},t}(r.SeriesBase);t.OverlayIndicatorBase=o;s=function(n){function t(t){var i=n.call(this,t)||this;return i._period=14,i}return __extends(t,n),Object.defineProperty(t.prototype,"period",{get:function(){return this._period},set:function(n){n!==this._period&&(this._period=i.asInt(n,!1,!0),this._clearValues(),this._invalidate())},enumerable:!0,configurable:!0}),t.prototype.getValues=function(t){var i=null;return n.prototype._getLength.call(this)<=0?i:(this._shouldCalculate()&&(this._init(),this._calculate()),t===0?i=this._yvals:t===1&&(i=this._xvals),i)},t.prototype.getDataRect=function(t,f){var e;if(f)return f;if(e=null,n.prototype._getLength.call(this)<=0)return e;this._shouldCalculate()&&(this._init(),this._calculate());var o=u._minimum(this._xvals),h=u._maximum(this._xvals),s=u._minimum(this._yvals),c=u._maximum(this._yvals);return r._DataInfo.isValid(o)&&r._DataInfo.isValid(h)&&r._DataInfo.isValid(s)&&r._DataInfo.isValid(c)&&(e=new i.Rect(o,s,h-o,c-s)),e},t.prototype._clearValues=function(){n.prototype._clearValues.call(this);this._xvals=null;this._yvals=null},t.prototype._shouldCalculate=function(){return!this._yvals||!this._xvals},t.prototype._init=function(){n.prototype._init.call(this);this._yvals=[];this._xvals=[]},t.prototype._getItem=function(t){if(n.prototype._getLength.call(this)<=0)return n.prototype._getItem.call(this,t);this._shouldCalculate()&&(this._init(),this._calculate());var i=n.prototype._getLength.call(this),r=u._minimum(this._yvals.length,this._xvals.length);return t=i-r+t,n.prototype._getItem.call(this,t)},t}(o);t.SingleOverlayIndicatorBase=s;p=function(n){function t(t){var i=n.call(this)||this;return i.period=14,i.initialize(t),i}return __extends(t,n),t.prototype._calculate=function(){if(!(n.prototype._getLength.call(this)<=0)){var t=n.prototype._getBindingValues.call(this,0),r=n.prototype._getBindingValues.call(this,1),f=n.prototype._getBindingValues.call(this,3),i=this._getXValues();this._yvals=u._avgTrueRng(t,r,f,this.period);this._xvals=i?i.slice(this.period-1):u._range(this.period-1,t.length)}},t}(s);t.ATR=p;w=function(n){function t(t){var i=n.call(this)||this;return i._constant=.015,i.period=20,i.initialize(t),i}return __extends(t,n),Object.defineProperty(t.prototype,"constant",{get:function(){return this._constant},set:function(n){n!==this._constant&&(this._constant=i.asNumber(n,!1),this._clearValues(),this._invalidate())},enumerable:!0,configurable:!0}),t.prototype._calculate=function(){var t=n.prototype._getLength.call(this);if(!(t<=0)){var r=n.prototype._getBindingValues.call(this,0),f=n.prototype._getBindingValues.call(this,1),e=n.prototype._getBindingValues.call(this,3),i=this._getXValues();this._yvals=b(r,f,e,this.period,this.constant);this._xvals=i?i.slice(this.period-1):u._range(this.period-1,t-1)}},t}(s);t.CCI=w;t._cci=b;k=function(n){function t(t){var i=n.call(this)||this;return i.period=14,i.initialize(t),i}return __extends(t,n),t.prototype._calculate=function(){var t=n.prototype._getLength.call(this);if(!(t<=0)){var r=n.prototype._getBindingValues.call(this,0),f=n.prototype._getBindingValues.call(this,1),e=n.prototype._getBindingValues.call(this,3),i=this._getXValues();this._yvals=d(r,f,e,this.period);this._xvals=i?i.slice(this.period-1):u._range(this.period-1,t-1)}},t}(s);t.WilliamsR=k;t._williamsR=d,function(n){n[n.Simple=0]="Simple";n[n.Exponential=1]="Exponential"}(h=t.MovingAverageType||(t.MovingAverageType={}));g=function(n){function t(t){var i=n.call(this)||this;return i._period=20,i._type=h.Simple,i._size=.025,i.rendering.addHandler(i._rendering,i),i.initialize(t),i}return __extends(t,n),Object.defineProperty(t.prototype,"period",{get:function(){return this._period},set:function(n){n!==this._period&&(this._period=i.asInt(n,!1,!0),this._clearValues(),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this._type},set:function(n){n!==this._type&&(this._type=i.asEnum(n,h,!1),this._clearValues(),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._size},set:function(n){n!==this._size&&(this._size=i.asNumber(n,!1,!0),this._clearValues(),this._invalidate())},enumerable:!0,configurable:!0}),t.prototype.getDataRect=function(t,f){var e;if(f)return f;if(e=null,n.prototype._getLength.call(this)<=0)return e;this._shouldCalculate()&&(this._init(),this._calculate());var h=this._upperYVals.concat(this._lowerYVals),o=u._minimum(this._xVals),c=u._maximum(this._xVals),s=u._minimum(h),l=u._maximum(h);return r._DataInfo.isValid(o)&&r._DataInfo.isValid(c)&&r._DataInfo.isValid(s)&&r._DataInfo.isValid(l)&&(e=new i.Rect(o,s,c-o,l-s)),e},t.prototype._clearValues=function(){n.prototype._clearValues.call(this);this._upperYVals=null;this._lowerYVals=null;this._xVals=null},t.prototype._init=function(){n.prototype._init.call(this);this._upperYVals=[];this._lowerYVals=[];this._xVals=[]},t.prototype._shouldCalculate=function(){return!this._upperYVals||!this._lowerYVals||!this._xVals},t.prototype._calculate=function(){var f=this,i,r,t;if(!(n.prototype._getLength.call(this)<=0)){i=n.prototype.getValues.call(this,0);r=this._getXValues();switch(this.type){case h.Exponential:t=u._ema(i,this.period);break;case h.Simple:default:t=u._sma(i,this.period)}this._xVals=r?r.slice(this.period-1):u._range(this.period-1,n.prototype._getLength.call(this)-1);this._upperYVals=t.map(function(n){return n+n*f.size});this._lowerYVals=t.map(function(n){return n-n*f.size})}},t.prototype._rendering=function(t,f){var e;if(f.cancel=!0,!(n.prototype._getLength.call(this)<=0)){this._shouldCalculate()&&(this._init(),this._calculate());var o=this.chart.series.indexOf(this),h=f.engine,w=this._getAxisX(),l=this._getAxisY(),a=u._minimum(this._upperYVals.length,this._lowerYVals.length,this._xVals.length),k=r._BasePlotter.cloneStyle(this.style,["fill"]),g=this._getSymbolStroke(o),d=this.chart._plotrectId;if(a&&!(a<=0)){h.stroke=g;h.strokeWidth=2;var s=[],v=[],y=[],nt=this._getLength(),p,c,b;for(e=0;e<a;e++)b=nt-a+e,s.push(w.convert(this._xVals[e])),v.push(l.convert(this._upperYVals[e])),p=this._getDataPoint(this._xVals[e],this._upperYVals[e],o,b,w,l),c=new r._CircleArea(new i.Point(s[e],v[e]),.5*h.strokeWidth),c.tag=p,this._hitTester.add(c,o),y.push(l.convert(this._lowerYVals[e])),p=this._getDataPoint(this._xVals[e],this._lowerYVals[e],o,b,w,l),c=new r._CircleArea(new i.Point(s[e],y[e]),.5*h.strokeWidth),c.tag=p,this._hitTester.add(c,o);this._hitTester.add(new r._LinesArea(s,v),o);this._hitTester.add(new r._LinesArea(s,y),o);h.drawLines(s,v,null,k,d);h.drawLines(s,y,null,k,d)}}},t.prototype.getCalculatedValues=function(t){t=i.asString(t,!1);var u=[],r=0;if(n.prototype._getLength.call(this)<=0)return u;this._shouldCalculate()&&(this._init(),this._calculate());switch(t){case"upperEnvelope":for(;r<this._upperYVals.length;r++)u.push({x:this._xVals[r],y:this._upperYVals[r]});break;case"lowerEnvelope":for(;r<this._lowerYVals.length;r++)u.push({x:this._xVals[r],y:this._lowerYVals[r]})}return u},t}(o);t.Envelopes=g;nt=function(n){function t(t){var i=n.call(this)||this;return i._period=20,i._multiplier=2,i.rendering.addHandler(i._rendering,i),i.initialize(t),i}return __extends(t,n),Object.defineProperty(t.prototype,"period",{get:function(){return this._period},set:function(n){n!==this._period&&(this._period=i.asInt(n,!1,!0),this._clearValues(),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"multiplier",{get:function(){return this._multiplier},set:function(n){n!==this._multiplier&&(this._multiplier=i.asNumber(n,!1,!0),this._clearValues(),this._invalidate())},enumerable:!0,configurable:!0}),t.prototype.getDataRect=function(t,f){if(f)return f;if(n.prototype._getLength.call(this)<=0)return null;this._shouldCalculate()&&(this._init(),this._calculate());var s=this._upperYVals.concat(this._lowerYVals),e=u._minimum(this._xVals),h=u._maximum(this._xVals),o=u._minimum(s),c=u._maximum(s);return r._DataInfo.isValid(e)&&r._DataInfo.isValid(h)&&r._DataInfo.isValid(o)&&r._DataInfo.isValid(c)?new i.Rect(e,o,h-e,c-o):null},t.prototype._clearValues=function(){n.prototype._clearValues.call(this);this._upperYVals=null;this._middleYVals=null;this._lowerYVals=null;this._xVals=null},t.prototype._shouldCalculate=function(){return!this._upperYVals||!this._middleYVals||!this._lowerYVals||!this._xVals},t.prototype._init=function(){n.prototype._init.call(this);this._upperYVals=[];this._middleYVals=[];this._lowerYVals=[];this._xVals=[]},t.prototype._calculate=function(){var i=n.prototype._getLength.call(this);if(!(i<=0)){var f=n.prototype.getValues.call(this,0),r=this._getXValues(),t=tt(f,this.period,this.multiplier);this._upperYVals=t.uppers;this._middleYVals=t.middles;this._lowerYVals=t.lowers;this._xVals=r?r.slice(this.period-1):u._range(this.period-1,i-1)}},t.prototype._rendering=function(t,f){var e;if(f.cancel=!0,!(n.prototype._getLength.call(this)<=0)){this._shouldCalculate()&&(this._init(),this._calculate());var o=this.chart.series.indexOf(this),c=f.engine,v=this._getAxisX(),l=this._getAxisY(),y=u._minimum(this._upperYVals.length,this._middleYVals.length,this._lowerYVals.length,this._xVals.length),d=r._BasePlotter.cloneStyle(this.style,["fill"]),nt=this._getSymbolStroke(o),g=this.chart._plotrectId;if(y&&!(y<=0)){c.stroke=nt;c.strokeWidth=2;var s=[],p=[],w=[],b=[],tt=this._getLength(),a,h,k;for(e=0;e<y;e++)k=tt-y+e,s.push(v.convert(this._xVals[e])),p.push(l.convert(this._upperYVals[e])),a=this._getDataPoint(this._xVals[e],this._upperYVals[e],o,k,v,l),h=new r._CircleArea(new i.Point(s[e],p[e]),.5*c.strokeWidth),h.tag=a,this._hitTester.add(h,o),w.push(l.convert(this._middleYVals[e])),a=this._getDataPoint(this._xVals[e],this._middleYVals[e],o,k,v,l),h=new r._CircleArea(new i.Point(s[e],w[e]),.5*c.strokeWidth),h.tag=a,this._hitTester.add(h,o),b.push(l.convert(this._lowerYVals[e])),a=this._getDataPoint(this._xVals[e],this._lowerYVals[e],o,k,v,l),h=new r._CircleArea(new i.Point(s[e],b[e]),.5*c.strokeWidth),h.tag=a,this._hitTester.add(h,o);this._hitTester.add(new r._LinesArea(s,p),o);this._hitTester.add(new r._LinesArea(s,w),o);this._hitTester.add(new r._LinesArea(s,b),o);c.drawLines(s,p,null,d,g);c.drawLines(s,w,null,d,g);c.drawLines(s,b,null,d,g)}}},t.prototype.getCalculatedValues=function(t){t=i.asString(t,!1);var u=[],r=0;if(n.prototype._getLength.call(this)<=0)return u;this._shouldCalculate()&&(this._init(),this._calculate());switch(t){case"upperBand":for(;r<this._upperYVals.length;r++)u.push({x:this._xVals[r],y:this._upperYVals[r]});break;case"middleBand":for(;r<this._middleYVals.length;r++)u.push({x:this._xVals[r],y:this._middleYVals[r]});break;case"lowerBand":for(;r<this._lowerYVals.length;r++)u.push({x:this._xVals[r],y:this._lowerYVals[r]})}return u},t}(o);t.BollingerBands=nt;t._bollingerBands=tt;it=function(n){function t(t){var i=n.call(this)||this;return i.period=14,i.initialize(t),i}return __extends(t,n),t.prototype._calculate=function(){var i=n.prototype._getLength.call(this),r,t;i<=0||(r=n.prototype._getBindingValues.call(this,0),t=this._getXValues(),this._yvals=rt(r,this.period),this._xvals=t?t.slice(this.period):u._range(this.period,i))},t}(s);t.RSI=it;t._rsi=rt;c=function(n){function t(t){var i=n.call(this,t)||this;return i._fastPeriod=12,i._slowPeriod=26,i._smoothingPeriod=9,i}return __extends(t,n),Object.defineProperty(t.prototype,"fastPeriod",{get:function(){return this._fastPeriod},set:function(n){n!==this._fastPeriod&&(this._fastPeriod=i.asInt(n,!1,!0),this._clearValues(),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"slowPeriod",{get:function(){return this._slowPeriod},set:function(n){n!==this._slowPeriod&&(this._slowPeriod=i.asInt(n,!1,!0),this._clearValues(),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"smoothingPeriod",{get:function(){return this._smoothingPeriod},set:function(n){n!==this._smoothingPeriod&&(this._smoothingPeriod=i.asInt(n,!1,!0),this._clearValues(),this._invalidate())},enumerable:!0,configurable:!0}),t.prototype._clearValues=function(){n.prototype._clearValues.call(this);this._macdVals=null;this._macdXVals=null;this._signalVals=null;this._signalXVals=null;this._histogramVals=null;this._histogramXVals=null},t.prototype._shouldCalculate=function(){return!this._macdVals||!this._macdXVals||!this._signalVals||!this._signalXVals||!this._histogramVals||!this._histogramXVals},t.prototype._init=function(){n.prototype._init.call(this);this._macdVals=[];this._macdXVals=[];this._signalVals=[];this._signalXVals=[];this._histogramVals=[];this._histogramXVals=[]},t.prototype._calculate=function(){var t=n.prototype._getLength.call(this);if(!(t<=0)){var f=n.prototype.getValues.call(this,0),i=this._getXValues(),r=et(f,this.fastPeriod,this.slowPeriod,this.smoothingPeriod);this._macdVals=r.macds;this._signalVals=r.signals;this._histogramVals=r.histograms;this._macdXVals=i?i.slice(t-this._macdVals.length,t):u._range(t-this._macdVals.length,t-1);this._signalXVals=i?i.slice(t-this._signalVals.length,t):u._range(t-this._signalVals.length,t-1);this._histogramXVals=i?i.slice(t-this._histogramVals.length,t):u._range(t-this._histogramVals.length,t-1)}},t}(o);t.MacdBase=c;ut=function(n){function t(t){var i=n.call(this)||this;return i._seriesCount=2,i.rendering.addHandler(i._rendering,i),i.initialize(t),i}return __extends(t,n),Object.defineProperty(t.prototype,"styles",{get:function(){return this._styles},set:function(n){n!==this._styles&&(this._styles=n,this._invalidate())},enumerable:!0,configurable:!0}),t.prototype.getDataRect=function(t,f){var s,e,o;if(f)return f;if(s=null,n.prototype._getLength.call(this)<=0)return s;this._shouldCalculate()&&(this._init(),this._calculate());e=[];o=[];o.push.apply(o,this._macdXVals);o.push.apply(o,this._signalXVals);e.push.apply(e,this._macdVals);e.push.apply(e,this._signalVals);var h=u._minimum(o),l=u._maximum(o),c=u._minimum(e),a=u._maximum(e);return r._DataInfo.isValid(h)&&r._DataInfo.isValid(l)&&r._DataInfo.isValid(c)&&r._DataInfo.isValid(a)&&(s=new i.Rect(h,c,l-h,a-c)),s},t.prototype._rendering=function(t,u){if(u.cancel=!0,!(n.prototype._getLength.call(this)<=0)){this._shouldCalculate()&&(this._init(),this._calculate());var o=this.chart.series.indexOf(this),e=u.engine,a=this._getAxisX(),v=this._getAxisY(),nt=r._BasePlotter.cloneStyle(this.style,["fill"]),y=this._getSymbolStroke(o),tt=this.chart._plotrectId,p=2,c=null,it=y,rt=p,l=null,ut=y,ft=p;this.styles&&i.isObject(this.styles)&&(this.styles.macdLine&&i.isObject(this.styles.macdLine)&&(c=r._BasePlotter.cloneStyle(this.styles.macdLine,["fill"]),it=c.stroke?c.stroke:y,rt=c.strokeWidth?c.strokeWidth:p),this.styles.signalLine&&i.isObject(this.styles.signalLine)&&(l=r._BasePlotter.cloneStyle(this.styles.signalLine,["fill"]),ut=l.stroke?l.stroke:y,ft=l.strokeWidth?l.strokeWidth:p));for(var w=[],b=[],k=[],d=[],s,h,et=this._getLength(),g,f=0;f<this._macdVals.length;f++)g=et-this._macdVals.length+f,b.push(a.convert(this._macdXVals[f])),w.push(v.convert(this._macdVals[f])),s=this._getDataPoint(this._macdXVals[f],this._macdVals[f],o,g,a,v),s.name=this._getName(0),h=new r._CircleArea(new i.Point(b[f],w[f]),.5*e.strokeWidth),h.tag=s,this._hitTester.add(h,o);for(this._hitTester.add(new r._LinesArea(b,w),o),e.stroke=it,e.strokeWidth=rt,e.drawLines(b,w,null,nt,tt),f=0;f<this._signalVals.length;f++)g=et-this._signalVals.length+f,d.push(a.convert(this._signalXVals[f])),k.push(v.convert(this._signalVals[f])),s=this._getDataPoint(this._signalXVals[f],this._signalVals[f],o,g,a,v),s.name=this._getName(1),h=new r._CircleArea(new i.Point(d[f],k[f]),.5*e.strokeWidth),h.tag=s,this._hitTester.add(h,o);this._hitTester.add(new r._LinesArea(d,k),o);e.stroke=ut;e.strokeWidth=ft;e.drawLines(d,k,null,nt,tt)}},t.prototype.getCalculatedValues=function(t){t=i.asString(t,!1);var u=[],r=0;if(n.prototype._getLength.call(this)<=0)return u;this._shouldCalculate()&&(this._init(),this._calculate());switch(t){case"macdLine":for(;r<this._macdVals.length;r++)u.push({x:this._macdXVals[r],y:this._macdVals[r]});break;case"signalLine":for(;r<this._signalVals.length;r++)u.push({x:this._signalXVals[r],y:this._signalVals[r]})}return u},t}(c);t.Macd=ut;ft=function(n){function t(t){return n.call(this,t)||this}return __extends(t,n),t.prototype.getValues=function(t){var i=null;return n.prototype._getLength.call(this)<=0?i:(this._shouldCalculate()&&(this._init(),this._calculate()),t===0?i=this._histogramVals:t===1&&(i=this._histogramXVals),i)},t.prototype.getDataRect=function(t,f){var e;if(f)return f;if(e=null,n.prototype._getLength.call(this)<=0)return e;this._shouldCalculate()&&(this._init(),this._calculate());var o=u._minimum(this._histogramXVals),h=u._maximum(this._histogramXVals),s=u._minimum(this._histogramVals),c=u._maximum(this._histogramVals);return r._DataInfo.isValid(o)&&r._DataInfo.isValid(h)&&r._DataInfo.isValid(s)&&r._DataInfo.isValid(c)&&(e=new i.Rect(o,s,h-o,c-s)),e},t.prototype._getChartType=function(){return r.ChartType.Column},t.prototype._getItem=function(t){var i=n.prototype._getLength.call(this),r=u._minimum(this._histogramVals.length,this._histogramXVals.length);return t=i-r+t,n.prototype._getItem.call(this,t)},t}(c);t.MacdHistogram=ft;t._macd=et;ot=function(n){function t(t){var i=n.call(this)||this;return i._kPeriod=14,i._dPeriod=3,i._smoothingPeriod=1,i._seriesCount=2,i.rendering.addHandler(i._rendering,i),i.initialize(t),i}return __extends(t,n),Object.defineProperty(t.prototype,"kPeriod",{get:function(){return this._kPeriod},set:function(n){n!==this._kPeriod&&(this._kPeriod=i.asInt(n,!1,!0),this._clearValues(),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dPeriod",{get:function(){return this._dPeriod},set:function(n){n!==this._dPeriod&&(this._dPeriod=i.asInt(n,!1,!0),this._clearValues(),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"smoothingPeriod",{get:function(){return this._smoothingPeriod},set:function(n){n!==this._smoothingPeriod&&(this._smoothingPeriod=i.asInt(n,!1,!0),this._clearValues(),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"styles",{get:function(){return this._styles},set:function(n){n!==this._styles&&(this._styles=n,this._invalidate())},enumerable:!0,configurable:!0}),t.prototype.getDataRect=function(t,f){var e;if(f)return f;if(e=null,n.prototype._getLength.call(this)<=0)return e;this._shouldCalculate()&&(this._init(),this._calculate());var h=this._kVals.concat(this._dVals),c=this._kXVals.concat(this._dXVals),o=u._minimum(c),l=u._maximum(c),s=u._minimum(h),a=u._maximum(h);return r._DataInfo.isValid(o)&&r._DataInfo.isValid(l)&&r._DataInfo.isValid(s)&&r._DataInfo.isValid(a)&&(e=new i.Rect(o,s,l-o,a-s)),e},t.prototype._clearValues=function(){n.prototype._clearValues.call(this);this._kVals=null;this._kXVals=null;this._dVals=null;this._dXVals=null},t.prototype._shouldCalculate=function(){return!this._kVals||!this._kXVals||!this._dVals||!this._dXVals},t.prototype._init=function(){n.prototype._init.call(this);this._kVals=[];this._kXVals=[];this._dVals=[];this._dXVals=[]},t.prototype._calculate=function(){var r=n.prototype._getLength.call(this);if(!(n.prototype._getLength.call(this)<=0)){var f=n.prototype._getBindingValues.call(this,0),e=n.prototype._getBindingValues.call(this,1),o=n.prototype._getBindingValues.call(this,3),t=this._getXValues(),i=st(f,e,o,this.kPeriod,this.dPeriod,this.smoothingPeriod);this._kVals=i.ks;this._dVals=i.ds;this._kXVals=t?t.slice(this.kPeriod-1):u._range(this.kPeriod-1,r-1);this.smoothingPeriod&&this.smoothingPeriod>1&&(this._kXVals=this._kXVals.slice(this._kXVals.length-this._kVals.length,this._kXVals.length));this._dXVals=this._kXVals.slice(this._kXVals.length-this._dVals.length,this._kXVals.length)}},t.prototype._rendering=function(t,u){if(u.cancel=!0,!(n.prototype._getLength.call(this)<=0)){this._shouldCalculate()&&(this._init(),this._calculate());var o=this.chart.series.indexOf(this),e=u.engine,a=this._getAxisX(),v=this._getAxisY(),nt=r._BasePlotter.cloneStyle(this.style,["fill"]),y=this._getSymbolStroke(o),tt=this.chart._plotrectId,p=2,c=null,it=y,rt=p,l=null,ut=y,ft=p;this.styles&&i.isObject(this.styles)&&(this.styles.kLine&&i.isObject(this.styles.kLine)&&(c=r._BasePlotter.cloneStyle(this.styles.kLine,["fill"]),it=c.stroke?c.stroke:y,rt=c.strokeWidth?c.strokeWidth:p),this.styles.dLine&&i.isObject(this.styles.dLine)&&(l=r._BasePlotter.cloneStyle(this.styles.dLine,["fill"]),ut=l.stroke?l.stroke:y,ft=l.strokeWidth?l.strokeWidth:p));for(var w=[],b=[],k=[],d=[],et=this._getLength(),s,h,g,f=0;f<this._kVals.length;f++)g=et-this._kVals.length+f,b.push(a.convert(this._kXVals[f])),w.push(v.convert(this._kVals[f])),s=this._getDataPoint(this._kXVals[f],this._kVals[f],o,g,a,v),s.name=this._getName(0),h=new r._CircleArea(new i.Point(b[f],w[f]),.5*e.strokeWidth),h.tag=s,this._hitTester.add(h,o);for(this._hitTester.add(new r._LinesArea(b,w),o),e.stroke=it,e.strokeWidth=rt,e.drawLines(b,w,null,nt,tt),f=0;f<this._dVals.length;f++)g=et-this._dVals.length+f,d.push(a.convert(this._dXVals[f])),k.push(v.convert(this._dVals[f])),s=this._getDataPoint(this._dXVals[f],this._dVals[f],o,g,a,v),s.name=this._getName(1),h=new r._CircleArea(new i.Point(d[f],k[f]),.5*e.strokeWidth),h.tag=s,this._hitTester.add(h,o);this._hitTester.add(new r._LinesArea(d,k),o);e.stroke=ut;e.strokeWidth=ft;e.drawLines(d,k,null,nt,tt)}},t.prototype.getCalculatedValues=function(t){t=i.asString(t,!1);var u=[],r=0;if(n.prototype._getLength.call(this)<=0)return u;this._shouldCalculate()&&(this._init(),this._calculate());switch(t){case"kLine":for(;r<this._kVals.length;r++)u.push({x:this._kXVals[r],y:this._kVals[r]});break;case"dLine":for(;r<this._dVals.length;r++)u.push({x:this._dXVals[r],y:this._dVals[r]})}return u},t}(o);t.Stochastic=ot;t._stochastic=st})